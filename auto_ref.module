<?php


/*
 * Tell Drupal about the field widget
*/
function auto_ref_field_widget_info() {
    return array(
        'auto_ref_field_widget' => array(
          'label' => t('Auto Reference'),
          'field types' => array('entityreference'),
            'behaviors' => array(
              'multiple values' => FIELD_BEHAVIOR_DEFAULT,
            )
        ),
    );    
}


/*
 * Tell Drupal how to display your widget
*/
function auto_ref_field_widget_form(&$form,&$form_state,$field,$instance,$langcode,$items,$delta,$element) {
   
   // Ensure that the entity target type exists before displaying the widget.
   $entity_info = entity_get_info($field['settings']['target_type']);

   if (empty($entity_info)){
    return;
   }

}
